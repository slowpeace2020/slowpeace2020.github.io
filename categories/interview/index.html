<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Interview | slowpeace2020-blog</title>
<meta name=keywords content><meta name=description content="slowpeace2020-blog description"><meta name=author content="Me"><link rel=canonical href=https://slowpeace2020.github.io/categories/interview/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.5ff2630c4d1b3e25bc21f0ecd96681dbcf58219e741fa627857820b5485cb770.css integrity="sha256-X/JjDE0bPiW8IfDs2WaB289YIZ50H6YnhXggtUhct3A=" rel="preload stylesheet" as=style><link rel=icon href=https://slowpeace2020.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=16x16 href=https://slowpeace2020.github.io/%3Clink%20/%20abs%20url%3E><link rel=icon type=image/png sizes=32x32 href=https://slowpeace2020.github.io/%3Clink%20/%20abs%20url%3E><link rel=apple-touch-icon href=https://slowpeace2020.github.io/%3Clink%20/%20abs%20url%3E><link rel=mask-icon href=https://slowpeace2020.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate type=application/rss+xml href=https://slowpeace2020.github.io/categories/interview/index.xml><link rel=alternate hreflang=en href=https://slowpeace2020.github.io/categories/interview/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Interview"><meta property="og:description" content="slowpeace2020-blog description"><meta property="og:type" content="website"><meta property="og:url" content="https://slowpeace2020.github.io/categories/interview/"><meta property="og:image" content="https://slowpeace2020.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="og:site_name" content="slowpeace2020-blog"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://slowpeace2020.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Interview"><meta name=twitter:description content="slowpeace2020-blog description"></head><body class=list id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://slowpeace2020.github.io/ accesskey=h title="slowpeace2020-blog (Alt + H)"><img src=https://slowpeace2020.github.io/apple-touch-icon.png alt aria-label=logo height=35>slowpeace2020-blog</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://slowpeace2020.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://slowpeace2020.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://slowpeace2020.github.io/ title=slowpeace2020><span>slowpeace2020</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li></ul></nav></header><main class=main><header class=page-header><div class=breadcrumbs><a href=https://slowpeace2020.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://slowpeace2020.github.io/categories/>Categories</a></div><h1>Interview
<a href=/categories/interview/index.xml title=RSS aria-label=RSS><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" height="23"><path d="M4 11a9 9 0 019 9"/><path d="M4 4a16 16 0 0116 16"/><circle cx="5" cy="19" r="1"/></svg></a></h1></header><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>High_concurrent_distribute_system_design</h2></header><div class=entry-content><p>面试技巧 怎么介绍项目经历？ 简单说一下项目背景。比如你做了一个项目，项目的整体架构是一体化的还是服务化的？拆分成了哪些服务？服务之间是通过什么协议通信的？怎么交互的？使用了哪些开源组件？组件选型的时候考虑了哪些因素。
可以有意引导面试官到自己比较擅长的内容，比如你对Kafka、RocketMQ等消息队列有比较深入的了解，你可以说使用哪些消息队列解决了哪方面的问题，在其中遇到了哪些坑，又是怎么优化的。
在项目介绍中突出自己的贡献，不仅仅是项目本身的并发度，方案设计。
针对复杂的需求你设计了哪些方案，这些方案技术难点是什么？你怎么解决的？ 针对项目中的疑难杂症诡异的问题，你是怎么排查的？ 项目维护过程出现了哪些性能问题？你又是怎么优化的？ 参考案例一 这个案例涉及排查一次自研的 RPC 框架的故障，回答的思路如下：
项目中使用的 RPC 框架存在某个 Bug，偶发地出现 RPC 客户端发送给 RPC 服务节点的所有心跳包全部超时，从而让 RPC 客户端认为服务节点已经发生故障，然后 RPC 客户端就不会将流量发送给这个服务节点。由于项目中使用了 Nett3 框架，我就理了一遍 Netty3 的连接过程的代码，确认是 Boss 线程或者 NioWorke 线程某个地方阻塞了。
然后，我通过 strace（系统调用抓取工具）抓取那段时间的系统调用，发现 BosS 线程中涉及的系统调用全部完成了，却没有发现把 socket fd（文件句柄）注册给 NioWorker 的 selector（文件句柄）的系统调用，于是确认是 NioWorker 的问题。
后来我打印了 jvm thread stack trace （Java 的线程堆栈），发现所有的 NioWorker 线程阻塞在 Object.wait，代码位置是 Clas.for-Name，这样就导致所有的 NioWorker 不再处理新的 Register task（注册任务），Netty Client Bootstrap 中所有的 ConnectFuture 的状态自然不被标记，最终导致上层所有的连接超时。
再往下追查后，我发现 JDK6 中确实存在类初始化过程中出现死锁的 Bug，在升级到 JDK7 之后问题就得到解决。
你看，本来是一个偶发的 RPC 框架层的问题而你在追查这个 Bug 的过程中涉及到了 Netty 网络编程、系统调用追踪，和多线程锁诊断等知识，面试官在听到这样的案例之后，也会认可你排查问题的思路和能力。...</p></div><footer class=entry-footer><span title='2024-06-16 08:19:51 -0400 -0400'>June 16, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;168 words&nbsp;·&nbsp;Slowpeace</footer><a class=entry-link aria-label="post link to High_concurrent_distribute_system_design" href=https://slowpeace2020.github.io/posts/interview_skill/></a></article><article class="post-entry tag-entry"><header class=entry-header><h2 class=entry-hint-parent>High_concurrent_distribute_system_design</h2></header><div class=entry-content><p>面试现场 其实你无需对组件达到源代码级别的了解，只需要深入了解它的实现原理，再结合一些基础知识，如算法、网络、操作系统等等，就足够应对 80% 的面试问题。
在面试的过程中，当你被问到组件的实现原理时，面试官其实想要了解你，是否对于实现原理中涉及的基础知识有足够的了解？在实际开发中，你是否能够运用这些基础知识来设计合理的方案？以及，当这些组件发生问题的时候，你是否有思路解决？
经典面试题 HashMap 实现的底层数据结构是怎样的? 如果发生 Hash 冲突，要怎么解决？常见的解决方式是怎样的? JDK8 中对 Hash Map 做了什么样的优化呢？ 红黑树的实现原理是怎样的？相比于链表它的优势和劣势都是什么？ HashMap 是线程安全的吗？ ConcurrentHashMap 是如何做到线程安全的呢？ 传统关系型数据库的可扩展性是很差的，那么在你看来，世面上常见的 NoSQL 数据库是如何解决扩展性的问题呢？ 如果你是连接池的设计者你会怎么设计，有哪些关键点？ 在实际的项目中，你可能会用到其他的池化技术，你可以和我分享一下在研发过程中，还使用过哪些其它池化技术吗？又因池化技术踩过哪些坑，当时你是怎么解决的？ 比如一个流程要调用三四个服务，前两个调用成功了，第三个失败了。类似的这种情况，该怎么处理呢？ 你在实际的工作中可能已经使用过一些 RPC 框架，那么结合你的实际经验，可以和我说说在 RPC 框架使用过程中，遇到了哪些问题吗？又是如何排查和解决的呢？ 你大可以试着回答一下 ，看看自己对上面几个问题是一知半解呢？还是能全部回答上来呢？
你看，虽然面试官问的是 JDK 中一个类的实现原理，但这里面涉及了数组、链表、红黑树等基本的算法；解决Hash 冲突的基本思路； 并发线程安全的含义，以及解决线程不安全问题的基本思路，并且也可以引出和线程安全相关的一系列问题。
了解了这些基本原理,除了可以夯实你的基础知识以外，还可以为你的方案设计提供思路。比如说，当需要更高效的读写内存中的数据时可以怎么做，遇到并发问题时要如何来解决等等。
最后，也是最重要的，了解了组件的基本原理你在使用这些组件的时候才能够充分发挥它的优点、避免踩坑，在遇到问题的时候也会有排查的思路。
todo 我建议你阅读一下，成熟的 RPC 框架的源代码。比如，阿里开源的 Dubbo，微博的 Motan 等等，理解它们的实现原理和细节，这样你会更有信心维护好你的微服务系统；同时，你也可以从优秀的代码中，学习到代码设计的技巧，比如说 Dubbo 对于 RPC 的抽象，SPI 扩展点的设计，这样可以有助你提升代码能力。</p></div><footer class=entry-footer><span title='2024-05-19 08:36:12 -0400 -0400'>May 19, 2024</span>&nbsp;·&nbsp;1 min&nbsp;·&nbsp;53 words&nbsp;·&nbsp;Slowpeace</footer><a class=entry-link aria-label="post link to High_concurrent_distribute_system_design" href=https://slowpeace2020.github.io/posts/interview_note/></a></article></main><footer class=footer><span>&copy; 2024 <a href=https://slowpeace2020.github.io/>slowpeace2020-blog</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>